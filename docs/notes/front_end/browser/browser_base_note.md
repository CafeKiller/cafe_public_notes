---
title: "浏览器原理"
category: WEB前端
subcategory: 浏览器
level: 8
zIndex: 100
tags:
  - ssg
  - vue
  - VuePress
---

# 浏览器原理

## 参考

> [!tip] 参考资料
>
> [构建浏览器工作原理知识体系](https://juejin.cn/post/7341983885726187559)


## 浏览器进程

现在的浏览器基本都是采用多进程架构设计，即一个标签页（也就是一个网页）会启用多个进程，一般至少有如下四个进程：

- 浏览器进程：整个浏览器的主进程，负责协调、控制其他进程；
- 渲染进程（也可以叫内核进程）：负责渲染页面内容的进程；
- 网络进程：负责处理网络请求，每个标签页都共享同一个网络进程，以减少资源占用。
- GPU进程：负责处理浏览器中与图形相关的任务，，例如加速页面绘制、处理 CSS 动画、执行 WebGL 操作等。GPU 进程与渲染进程分离，以提高性能。

> 除此以外，还可能开辟插件进程，如果页面使用了插件（例如 Flash、Java 等），则会有对应的插件进程。

### 渲染进程

渲染进程共有以下5类线程：

1. GUI渲染线程：负责渲染网页，当页面触发重绘、回流时该线程也会执行；
2. JS引擎线程：该线程是使用 js引擎处理 Javascript 脚本程序，解析 Javascript 脚本，运行代码；
3. 事件触发线程：负责处理用户输入和触发相应的事件（例如，点击按钮时，事件触发线程会负责处理这个点击事件）。它管理一个事件队列，当对应的事件被触发时，事件触发线程会把该事件添加到事件队列的队尾，等待JS引擎的处理；
4. 定时器触发线程：负责处理通过 `setTimeout` 和 `setInterval` 等方法设置的定时器，触发相应的回调函数；
5. 异步HTTP请求线程：XMLHttpRequest连接后，浏览器会新开一个线程请求，检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将回调函数放入事件队列中，等待JS引擎空闲后执行；

![图片](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5113a39407c84014aba1b2744a95e8e2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1541&h=795&s=134641&e=png&b=e7f5ff)

> 注意是5类线程，不是5个线程，例如GUI渲染线程就有渲染主线程、布局线程、合成器线程、栅格线程等；

> GUI渲染线程和JS引擎线程是互斥的（因为GUI 渲染线程和 JavaScript 引擎线程都需要访问和操作 DOM，所以做了线程安全的处理），当JS引擎执行时 GUI 线程会被挂起，GUI 更新会被保存在一个队列中等到JS引擎空闲时立即被执行。这也就是为什么js文件会阻塞页面加载，一般最好放在 html 底部引入的原因。

