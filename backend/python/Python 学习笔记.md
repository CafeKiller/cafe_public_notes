# Python 学习笔记

> 主要参考资料/书籍/文章:  
> [Python - 100天从新手到大师](https://github.com/jackfrued/Python-100-Days)

该笔记为 Cafe 个人学习使用, 主要作用是复习, 且拥有其他语言相关知识, 非小白向

## 安装Python

- windows 安装 直接前往官网下载一个即可

- linux 安装
    
> 此处使用 ubuntu 发行版

```shell
apt update # 更新包目录

apt install software-properties-common # 安装依赖

add-apt-repository ppa:deadsnakes/ppa # 添加 deadsnakes PPA 源]

apt install python3.X  # 安装指定版本python
```

## Python 基础

> 相关代码放置在本仓库的 /codes/backend/python/master_100_day/ 下

### 变量和类型

- 整型
- 浮点型
- 布尔型
- 字符串型
- 复数: 这个说一下, 其他语言并不多见, 形如 `3+5j` ，跟数学上的复数表示一样，唯一不同的是虚部的 `i` 换成了 `j` 。

__变量的命名__
  
- 硬性规则：
    - 变量名由字母（广义的Unicode字符，不包括特殊字符）、数字和下划线构成，数字不能开头。
    - 大小写敏感（大写的a和小写的A是两个不同的变量）。
    - 不要跟关键字（有特殊含义的单词，后面会讲到）和系统保留字（如函数、模块等的名字）冲突。
- PEP 8要求：
    - 用小写字母拼写，多个单词用下划线连接。
    - 受保护的实例属性用单个下划线开头。
    - 私有的实例属性用两个下划线开头。

__基础类型的转换__

- `int()`：将一个数值或字符串转换成整数，可以指定进制。
- `float()`：将一个字符串转换成浮点数。
- `str()`：将指定的对象转换成字符串形式，可以指定编码。
- `chr()`：将整数转换成该编码对应的字符串（一个字符）。
- `ord()`：将字符串（一个字符）转换成对应的编码（整数）。

__运算符__

> 大体上和其他语言是类似的, 这里标注几个其他语言上没有, 未标注的则是和其他语言一致

- 下标、切片: `[]` `[:]`
- 指数: `**`
- 身份运算符: `is` `is not`
- 成员运算符: `in` `not in`
- 逻辑运算符: `or`(或) `not`(取反) `and`(且)

__分支__

> python 最常用的分支语句只有 if 语句, 不过在 python3.10 时学习 rust 等语言引入了 match 分支语句  
> 需要注意的这并不是 switch...case , 传统的 switch...case 语句其实局限性非常大(这点可以看看c语言上的switch)
> 不过现在很多语言的 switch 都重新优化过了就是. match 语句则是一个相当现代的分支语句, 可以说更优雅更强大.

```python
if 条件:
    pass
elif 条件二:
    pass
else:
    pass

# match...case 语句 示例
value = 1
match value:
    case 1:
        print("匹配到值为1")
    case 2:
        print("匹配到值为2")
    case _:
        print("匹配到其他值")
```

__循环__

> python 中的循环中有两种, 分别是 for...in 和 while, 其中 while 和其他语言基本相同, 这里就不额外介绍了

```python
# range() 是用于构建一个范围的, 101 指的就是 1-100 的范围
for x in range(101):
    sum += x
```

> range() 非常的灵活, 在 for...in 也很常用, 以下为部分使用示例:  
> - range(10, 101)：可以用来产生10到100范围的整数，相当于前面是闭区间后面是开区间。
> - range(1, 101, 2)：可以用来产生1到100的奇数，其中2是步长，即每次数值递增的值。
> - range(100, 0, -2)：可以用来产生100到1的偶数，其中-2是步长，即每次数字递减的值。


__补充__

- `type()`: 用于识别类型
- `input()`: 用于接收用户从命令行写入的参数
- `print()`: 用于打印, 和其他语言类似可以使用 % 进行占位, 但形式可能不太相同
    - 注意占位符的使用方式是: `print('%d + %d = %d' % (a, b, a + b))` 


### 函数与模块

__函数__

> 函数的内部是允许再定义函数的, 也就是内部函数

```python
def fun1(parma):
    return parma * parma
```

__模块__

```python
# modele1.py 
def fun():
    pass
# modele2.py 
def fun():
    pass

import module1 as m1
import module2 as m2

m1.fun()
m2.fun()
```

> 需要说明的时, 当引入模块时, 模块内的可执行函数都会被执行, 也就是说包括内部写的测试/内部函数都可能被执行, 这并不是我们希望的  
> 此时就需要使用 __main__ 函数了

__main函数__

> 与 javascript 语言类似 python 其实也是可以不使用 main 函数就运行程序, 但并不是说 python 没有 main 函数 

```python
def fun1():
    pass

# __name__是Python中一个隐含的变量它代表了模块的名字
# 只有被Python解释器直接执行的模块的名字才是__main__
if __name__ == '__main__':
    print("Hello World")
    fun1()
```

### 常用数据结构

- 字符串: 和其他语言的字符串基本一致, 可以使用连续三个 `"/'` 符号的字符串可以直接换行 (有点类似于 javascript 的模版字符串)

- 列表: 和其他语言的数组类似, 具体操作起来更像是 java、kotlin 中的集合. 使用 `[]`

- 元组: 这个有点特殊,但也不是很特殊, 有点类似于 javascript 中的数组, 可以存储不同类型的元素, 使用 `()`

- 集合: 也就是其他语言上的 set 集合, 不允许存在重复元素, 可以进行交集、并集、差集等运算。

- 字典: 也就是其他语言上的 map 集合, 使用键值对的方式保存数据.

__补充__

可以使用生成式语法来创建列表

```python
f = [x for x in range(1, 10)]
print(f)
f = [x + y for x in 'ABCDE' for y in '1234567']
print(f)

# 用列表的生成表达式语法创建列表容器
# 用这种语法创建列表之后元素已经准备就绪所以需要耗费较多的内存空间
f = [x ** 2 for x in range(1, 1000)]
print(sys.getsizeof(f))  # 查看对象占用内存的字节数
print(f)

# 请注意下面的代码创建的不是一个列表而是一个生成器对象
# 通过生成器可以获取到数据但它不占用额外的空间存储数据
# 每次需要数据的时候就通过内部的运算得到数据(需要花费额外的时间)
f = (x ** 2 for x in range(1, 1000))
print(sys.getsizeof(f))  # 相比生成式生成器不占用存储数据的空间
print(f)
for val in f:
    print(val)
```

### 面向对象

[相关代码](../../codes/backend/python/master_100_day/test_03.py)  

和其他语言类似, 使用 class 定义类

初始化函数的形式为: `def __init__(self):`  

关于访问可见性问题, python 类中的方法, 默认就是对外公开的(public), 如果需要设置为私有的, 可以在属性名和方法名前添加两个下划线, 如 `__func(self):`  

不过需要注意的时, python其实并没有严格的保护私有方法, 你完全可以通过给这种方式访问私有属性  

```python
cls1 = Test()
cls1._Test__func1()
```
所以在开发时, 并不推荐使用私有方法, 当然, 我们在调用类中的私有函数时也需要谨慎, 可以使用单下划线来表示该方法为内部私有函数 (这是规范上的, 并非语法上的)  

__@property__

> 之前我们讨论过Python中属性和方法访问权限的问题，虽然我们不建议将属性设置为私有.  
> 但是如果直接将属性暴露给外界也是有问题的，比如我们没有办法检查赋给属性的值是否有效。  
> 我们之前的建议是将属性命名以单下划线开头，通过这种方式来暗示属性是受保护的，
> 不建议外界直接访问，那么如果想访问属性可以通过属性的getter（访问器）和setter（修改器）方法进行对应的操作。  
> 如果要做到这点，就可以考虑使用@property包装器来包装getter和setter方法，使得对属性的访问既安全又方便   

`__slots__`

> 这是一个魔法变量, 用于限制 类 的属性  
> Python是一门动态语言。通常，动态语言允许我们在程序运行时给对象绑定新的属性或方法，当然也可以对已经绑定的属性和方法进行解绑定。  
> 但是如果我们需要限定自定义类型的对象只能绑定某些属性，可以通过在类中定义__slots__变量来进行限定。需要注意的是__slots__的限定只对当前类的对象生效，对子类并不起任何作用。

__静态方法和类方法__

> 静态方法使用 @staticmethod 整体来说基本和 java 的那个静态方法一致, 可以直接使用 类名 访问
> 而类方法其实也和静态方法类似, 类方法的第一个参数约定名为cls，它代表的是当前类相关的信息的对象（类本身也是一个对象，有的地方也称之为类的元数据对象），通过这个参数我们可以获取和类相关的信息并且可以创建出类的对象, 使用场景的话, 那就是创建单例方法  

__继承与多态__

python 中的继承和多态机制与其他语言无异

```python
class Animals(object):
    pass

class Cat(Animals):
    pass

class Dog(Animals):
    pass
```


### 文件操作与异常处理

python 中的文件读出与操作对比起其他语言来说是非常简单的, 只需要使用 `open()` 函数即可

操作模式说明:  

- `'r'`	读取（默认）
- `'w'`	写入（会先截断之前的内容）
- `'x'`	写入，如果文件已经存在会产生异常
- `'a'`	追加，将内容写入到已有文件的末尾
- `'b'`	二进制模式
- `'t'`	文本模式（默认）
- `'+'`	更新（既可以读又可以写）

